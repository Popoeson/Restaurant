<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TastyBite | Delicious Food at Your Doorstep</title>
  <!-- ‚úÖ PWA + iOS support -->
<link rel="manifest" href="/manifest-customer.json" />
<meta name="theme-color" content="#ff6600" />

<!-- iOS home-screen icons -->
<link rel="apple-touch-icon" href="/uploads/icons/icon-192x192.png" />
<link rel="apple-touch-icon" sizes="512x512" href="/uploads/icons/icon-512x512.png" />

<!-- Standalone mode for Safari iOS -->
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="TastyBite" />
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{background:#fff;color:#333;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}

header{width:100%;background:#fff;display:flex;justify-content:space-between;align-items:center;padding:15px 5%;box-shadow:0 2px 8px rgba(0,0,0,0.05);position:sticky;top:0;z-index:100;}
.logo{font-size:1.5rem;font-weight:700;color:#ff6600;}
.nav-right{display:flex;align-items:center;gap:15px;}
.cart-icon{font-size:1.4rem;cursor:pointer;color:#ff6600;position:relative;}
.cart-count{position:absolute;top:-6px;right:-10px;background:#ff5500;color:white;border-radius:50%;font-size:0.7rem;width:16px;height:16px;display:flex;align-items:center;justify-content:center;}
.nav-right button{background:linear-gradient(45deg,#ff8800,#ff5500);border:none;color:#fff;padding:8px 14px;border-radius:20px;font-size:0.9rem;cursor:pointer;transition:all 0.3s;}
.nav-right button:hover{transform:scale(1.05);box-shadow:0 3px 10px rgba(255,102,0,0.4);}

/* ---------- HERO ---------- */
.hero {
  position: relative;
  width: 100%;
  height: 65vh;
  background: url('uploads/restaurant.jpg') center/cover no-repeat;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hero-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.15); /* adjust opacity if needed */
  z-index: 1;
}

.hero-content {
  position: relative;
  z-index: 2;
  text-align: center;
  color: #fff;
  max-width: 600px;
  padding: 0 20px;
}

.hero-content h1 {
  font-size: 2.2rem;
  margin-bottom: 10px;
}

.hero-content p {
  font-size: 1rem;
  margin-bottom: 20px;
}

.hero-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
}

.hero-buttons button {
  background: white;
  color: #ff6600;
  border: none;
  padding: 10px 20px;
  border-radius: 25px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
}

.hero-buttons button:hover {
  background: #ff6600;
  color: #fff;
}
/* ---------- MENU ---------- */
.menu-section{padding:50px 5%;}
.menu-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;flex-wrap:wrap;}
.menu-header h2{color:#ff5500;font-size:1.8rem; margin-bottom: 8px;}
.category-filter{display:flex;gap:10px;flex-wrap:wrap;}
.category-filter button{background:linear-gradient(45deg,#ff8800,#ff5500);border:none;color:white;padding:6px 14px;border-radius:20px;font-size:0.9rem;cursor:pointer;transition:all 0.3s;}
.category-filter button:hover{background:#ff5500;}
.menu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:25px;}
.menu-card{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,0.05);transition:transform 0.3s ease;}
.menu-card:hover{transform:translateY(-5px);}
.menu-card img{width:100%;height:160px;object-fit:cover;}
.menu-info{padding:15px;}
.menu-info h3{font-size:1rem;display:flex;justify-content:space-between;align-items:center;color:#333;}
.menu-info h3 span{color:#ff6600;font-weight:600;}
.menu-info p{font-size:0.85rem;color:#666;margin:5px 0 10px;}
.menu-info button{background:linear-gradient(45deg,#ff8800,#ff5500);color:#fff;border:none;padding:8px 15px;border-radius:20px;cursor:pointer;transition:all 0.3s;}
.menu-info button:hover{transform:scale(1.05);}

/* ---------- TOAST ---------- */
#toastContainer{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:9999;display:flex;flex-direction:column;gap:10px;pointer-events:none;}
.toast{background:rgba(0,0,0,0.85);color:#fff;padding:12px 20px;border-radius:8px;font-weight:600;opacity:0;transform:translateY(20px);animation:slideIn 0.3s forwards;pointer-events:all;}
@keyframes slideIn{to{opacity:1;transform:translateY(0);}}
@keyframes slideOut{to{opacity:0;transform:translateY(20px);}}

footer{margin-top:50px;text-align:center;padding:20px;background:#fff3e6;color:#333;font-size:0.9rem;}
@media(max-width:768px){.hero-content h1{font-size:1.8rem;}.hero{height:55vh;}.menu-header h2{font-size:1.5rem;}}

  /* ---------- FOOTER ---------- */
.footer {
  background-color: #111827; /* dark navy */
  color: #f5f5f5;
  padding: 50px 6% 25px;
  font-family: "Poppins", sans-serif;
}

.footer-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 30px;
  margin-bottom: 25px;
}

.footer-about h3 {
  color: #ff6600;
  font-size: 1.4rem;
  margin-bottom: 10px;
}

.footer-about p {
  color: #ddd;
  line-height: 1.6;
}

.footer-hours h4,
.footer-contact h4 {
  color: #fff;
  font-size: 1.1rem;
  margin-bottom: 10px;
}

.footer-hours p,
.footer-contact p {
  color: #ccc;
  margin: 6px 0;
  font-size: 0.95rem;
}

.footer-hours span,
.footer-contact span {
  color: #ff6600;
  margin-right: 6px;
}

.footer-bottom {
  text-align: center;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding-top: 12px;
  font-size: 0.9rem;
  color: #aaa;
}

@media (max-width: 600px) {
  .footer {
    text-align: center;
  }
  .footer-hours p,
  .footer-contact p {
    margin-left: 0 !important;
  }
  }
</style>
</head>
<body>

<header>
  <div class="logo">TastyBite</div>
  <div class="nav-right">
    <div class="cart-icon" onclick="window.location.href='cart.html'">üõí<span class="cart-count">0</span></div>
  </div>
</header>

<!-- HERO -->
<section class="hero" id="heroSection">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>Delicious Food, Right at Your Doorstep</h1>
    <p>Freshly made meals delivered hot and fast ‚Äî satisfaction guaranteed!</p>
    <div class="hero-buttons">
      <button onclick="location.href='menu.html'">View Menu</button>
    </div>
  </div>
</section>

<!-- MENU -->
<section class="menu-section">
  <div class="menu-header">
    <h2 id="menuTitle">MENU</h2>
    <div class="category-filter">
      <button onclick="filterMenu('All')">All</button>
      <button onclick="filterMenu('Food')">Food</button>
      <button onclick="filterMenu('Snacks')">Snacks</button>
      <button onclick="filterMenu('Extras')">Extras</button>
      <button onclick="filterMenu('Soup')">Soup</button>
      <button onclick="filterMenu('Drinks')">Drinks</button>
      <button onclick="filterMenu('Shawarma')">Shawarma</button>
      <button onclick="filterMenu('Asun')">Asun</button>
    </div>
  </div>
  <div class="menu-grid" id="menuGrid">
    <p>Loading menu...</p>
  </div>
</section>

<footer class="footer">
  <div class="footer-container">
    <div class="footer-about">
      <h3>Tasty Bites</h3>
      <p>Delicious food made with the freshest ingredients, delivered right to your table.</p>
    </div>

    <div class="footer-hours">
      <h4>Hours</h4>
      <p><span>üïí</span> Monday - Friday: 11am - 10pm</p>
      <p style="margin-left: 22px;">Saturday - Sunday: 10am - 11pm</p>
    </div>

    <div class="footer-contact">
      <h4>Contact</h4>
      <p><span>üìû</span> (123) 456-7890</p>
      <p><span>üìç</span> 123 Main Street, Cityville, State 12345</p>
    </div>
  </div>

  <div class="footer-bottom">
    <p>¬© 2025 Tasty Bites. All rights reserved.</p>
  </div>
</footer>

<div id="toastContainer"></div>

<script>
const BASE_URL = "https://restaurant-eqbo.onrender.com/api/menu";
const menuGrid = document.getElementById("menuGrid");
const cartCount = document.querySelector(".cart-count");
const menuTitle = document.getElementById("menuTitle");
const toastContainer = document.getElementById("toastContainer");
const heroSection = document.getElementById("heroSection");

let allMenu = [];
let tastyPacks = JSON.parse(localStorage.getItem("tastyPacks")) || { "Pack 1": [] };
let activePack = localStorage.getItem("activePack") || "Pack 1";
localStorage.setItem("activePack", activePack);
menuTitle.textContent = `MENU (${activePack})`;

// ---------- Set hero image ----------
const heroImage = '/uploads/restaurant.jpg'; // replace with actual uploaded image path
heroSection.style.backgroundImage = `url('${heroImage}')`;

// ---------- Toast ----------
function showToast(message){
  const toast = document.createElement("div");
  toast.className = "toast";
  toast.textContent = message;
  toastContainer.appendChild(toast);
  setTimeout(()=>{
    toast.style.animation = "slideOut 0.3s forwards";
    toast.addEventListener("animationend",()=>toast.remove());
  },2000);
}

// ---------- Update cart count ----------
function updateCartCount(){
  let totalCount = 0;
  Object.values(tastyPacks).forEach(pack=>{
    pack.forEach(item=>totalCount+=item.qty);
  });
  cartCount.textContent = totalCount;
}

// ---------- Fetch menu ----------
async function fetchMenu(){
  try{
    const res = await fetch(BASE_URL);
    const data = await res.json();
    allMenu = data.sort((a,b)=>(b.featured===true)-(a.featured===true)); // featured first
    displayMenu(allMenu);
  } catch(err){
    console.error("Error fetching menu:", err);
    menuGrid.innerHTML = `<p style="color:red;">Failed to load menu. Please refresh.</p>`;
  }
}

// ---------- Display menu ----------
function displayMenu(menuItems){
  menuGrid.innerHTML = "";
  if(!menuItems.length){
    menuGrid.innerHTML = `<p>No menu items available yet.</p>`;
    return;
  }
  menuItems.forEach(item=>{
    const card = document.createElement("div");
    card.className = "menu-card";
    card.dataset.category = item.category || "Food";
    card.innerHTML = `
      <img src="${item.imageUrl || 'https://via.placeholder.com/400x250'}" alt="${item.name}">
      <div class="menu-info">
        <h3>${item.name} <span>‚Ç¶${item.price}</span></h3>
        <p>${item.description || ''}</p>
        <button onclick="addToCart('${item.name}', ${item.price}, this)">Add to Cart</button>
      </div>
    `;
    menuGrid.appendChild(card);
  });
}

// ---------- Add to cart ----------
function addToCart(name, price, btn){
  const img = btn.closest('.menu-card').querySelector('img').src;
  if(!tastyPacks[activePack]) tastyPacks[activePack] = [];
  const existing = tastyPacks[activePack].find(i=>i.name===name);
  if(existing) existing.qty++;
  else tastyPacks[activePack].push({name,price,img,qty:1});
  localStorage.setItem("tastyPacks",JSON.stringify(tastyPacks));
  updateCartCount();
  showToast(`${name} added to ${activePack}!`);
}

// ---------- Filter ----------
function filterMenu(category){
  let filtered = category==="All"?allMenu:allMenu.filter(item=>{
    const itemCategory = item.category?String(item.category).toLowerCase():'';
    return itemCategory===category.toLowerCase();
  });
  filtered = filtered.sort((a,b)=>(b.featured===true)-(a.featured===true)); // featured first
  displayMenu(filtered);
}

// ---------- Init ----------
fetchMenu();
updateCartCount();
</script>

  <script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker
      .register('/service-worker.js')
      .then(reg => console.log('‚úÖ Service Worker registered:', reg.scope))
      .catch(err => console.error('‚ùå SW registration failed:', err));
  });
}
  </script>
</body>
                                                     </html>
